import { AdmittanceInstructions, TopicManager } from '@bsv/overlay'
import docs from './TemplateTopicDocs.md.js'

/**
 * Template for a Topic Manager that can be modified for your specific use-case.
 */
export default class TemplateTopicManager implements TopicManager {
  /**
   * Identify which outputs in the supplied transaction are admissible.
   *
   * @param beef          Raw transaction encoded in BEEF format.
   * @param previousCoins Previouslyâ€‘retained coins.
   */
  async identifyAdmissibleOutputs(
    beef: number[],
    previousCoins: number[]
  ): Promise<AdmittanceInstructions> {
    const outputsToAdmit: number[] = []
    // TODO parse the transaction and filter the outputs from the provided transaction to admit into the Topic

    return {
      outputsToAdmit,
      coinsToRetain: []
    }
  }

  /**
   * Get the documentation associated with this topic manager
   * @returns A promise that resolves to a string containing the documentation
   */
  async getDocumentation(): Promise<string> {
    return docs
  }

  /**
   * Get metadata about the topic manager
   * @returns A promise that resolves to an object containing metadata
   */
  async getMetaData(): Promise<{
    name: string
    shortDescription: string
    iconURL?: string
    version?: string
    informationURL?: string
  }> {
    return {
      name: 'Template Topic Manager',
      shortDescription: 'Admit outputs into a topic'
    }
  }
}
